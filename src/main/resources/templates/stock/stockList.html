
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>BuyThen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Free HTML5 Website Template by FreeHTML5.co"/>
    <meta name="keywords"
          content="free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive"/>
    <meta name="author" content="FreeHTML5.co"/>
    <style>
        .pagination {
            display: inline-block;
        }

        .pagination a {
            color: black;
            float: left;
            padding: 8px 16px;
            text-decoration: none;
            transition: background-color .3s;
            border: 1px solid #ddd;
            margin: 0 4px;
        }

        .pagination a.active {
            background-color: #4CAF50;
            color: white;
            border: 1px solid #4CAF50;
        }

        .pagination a:hover:not(.active) {
            background-color: #ddd;
        }

        /* CSS로 애니메이션을 부드럽게 */
        .pagination a {
            transition: all 0.2s ease-in-out;
        }

        .search {
            position: relative;
            width: 300px;
        }

        input {
            width: 100%;
            border: 1px solid #bbb;
            border-radius: 8px;
            padding: 10px 12px;
            font-size: 14px;
        }

        img {
            position : absolute;
            width: 17px;
            top: 10px;
            right: 12px;
            margin: 0;
        }
    </style>

    <!--
      //////////////////////////////////////////////////////

      FREE HTML5 TEMPLATE
      DESIGNED & DEVELOPED by FreeHTML5.co

      Website: 		http://freehtml5.co/
      Email: 			info@freehtml5.co
      Twitter: 		http://twitter.com/fh5co
      Facebook: 		https://www.facebook.com/fh5co

      //////////////////////////////////////////////////////
       -->

    <!-- Facebook and Twitter integration -->
    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
    <meta name="twitter:title" content=""/>
    <meta name="twitter:image" content=""/>
    <meta name="twitter:url" content=""/>
    <meta name="twitter:card" content=""/>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="favicon.ico">

    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,700,900' rel='stylesheet' type='text/css'>

    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" th:href="@{/css/animate.css}">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" th:href="@{/css/icomoon.css}">
    <!-- Simple Line Icons -->
    <link rel="stylesheet" th:href="@{/css/simple-line-icons.css}">
    <!-- Bootstrap  -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <!-- Theme style  -->
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <!-- Modernizr JS -->
    <script th:src="@{/js/modernizr-2.6.2.min.js}"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script th:src="@{/js/respond.min.js}"></script>
    <![endif]-->

</head>
<body>

<div id="fh5co-page">
    <header id="fh5co-header" role="banner">
        <div class="container">
            <div class="header-inner">
                <h1><i class="sl-icon-energy"></i><a href="/">BuyThen</a></h1>
                <nav role="navigation">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a class="active" href="/stocklist">주식 리스트</a></li>
                        <li><a href="portfolio.html">주식 구매</a></li>
                        <li><a th:if="${member}" href="/mypage">나의 정보</a></li>
                        <li><a th:if="${member} == null" href="/login">로그인</a></li>
                        <li><a href="/about">정보</a></li>
                        <li><a href="/contact">문의하기</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div id="fh5co-about-section">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 text-center">
                    <h2>BuyThen</h2>
                    <div class="col-md-6 col-md-offset-3 text-center" style="position: absolute; left: 350px; top: 10px">
                        <form action="/stock/search" method="get">
                        <input type="text" placeholder="Search..." id="stockName" name="stockName">
                        </form>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-14">
                            <div class="about-inner">
                                <!--	<img class="img-responsive" src="images/image_about.jpg" alt="About">-->
                                <!--						<h3>History</h3>
                                                        <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
                                                        <blockquote>
                                                            <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
                                                        </blockquote>-->
                                <div class="container mt-5">
                                    <input type="hidden" id="allStockCount" th:value="${allStockCount}">
                                    <input type="hidden" id="currentPage" th:value="${currentPage}">
                                    <table class="table table-striped">
                                        <thead>
                                        <tr>
                                            <th>Stock ID</th>
                                            <th>주식 명</th>
                                            <th>가격(종가)</th>
                                            <th>날짜</th>
                                            <th>지난 주 가격(종가)</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="stock : ${stockList}">
                                            <td th:text="${stock.stockId}">1</td>
                                            <td>
                                                <a href="#" style="text-decoration: none; color: inherit;"
                                                   th:attr="data-stock-name=${stock.stockName},data-stock-price=${stock.stockPrice}"
                                                   onclick="openPopup(this)">
                                                    <span th:text="${stock.stockName}"></span>
                                                </a>
                                            </td>
                                            <td>
                                                <span th:text="${#numbers.formatInteger(stock.stockPrice, 0, 'COMMA') + '원'}"></span>
                                                <span th:if="${stock.stockPrice > stock.priceLastWeek}"
                                                      style="color: red; font-weight: bold;"> ▲</span>
                                                <span th:if="${stock.stockPrice > stock.priceLastWeek}"
                                                      style="color: red; font-weight: bold;" th:text="${stock.stockPrice - stock.priceLastWeek}"></span>
                                                <span th:if="${stock.stockPrice < stock.priceLastWeek}"
                                                      style="color: blue; font-weight: bold;"> ▼</span>
                                                <span th:if="${stock.stockPrice < stock.priceLastWeek}"
                                                      style="color: blue; font-weight: bold;" th:text="${stock.priceLastWeek - stock.stockPrice}"></span>
                                            </td>
                                            <td th:text="${stock.basDt}">2022-01-01</td>
                                            <td th:text="${#numbers.formatInteger(stock.priceLastWeek, 0, 'COMMA') + '원'}">100.0</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div class="col-md-10 col-md-offset-0 text-center fh5co-heading">
                                        <div class="pagination" id="pagination"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <blockquote>
                        <p>Be fearful when others are greedy, and greedy</p>
                        <p>when others are fearful</p>
                    </blockquote>
                    <!--	<div class="col-md-4">
                            <aside class="sidebar">
                                <div class="row">
                                    <div class="col-md-12 side">
                                        <h3>Categories</h3>
                                        <ul>
                                            <li><i class="icon-check"></i><a href="#">Web Design</a></li>
                                            <li><i class="icon-check"></i><a href="#">Branding &amp; Identity</a></li>
                                            <li><i class="icon-check"></i><a href="#">Free HTML5</a></li>
                                            <li><i class="icon-check"></i><a href="#">HandCrafted Templates</a></li>
                                            <li><i class="icon-check"></i><a href="#">Free Bootstrap Template</a></li>
                                            <li><i class="icon-check"></i><a href="#">Free HTML5 Template</a></li>
                                            <li><i class="icon-check"></i><a href="#">Free HTML5 &amp; CSS3 Template</a></li>
                                            <li><i class="icon-check"></i><a href="#">HandCrafted Templates</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-md-12 side">
                                        <h3>Paragraph</h3>
                                        <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
                                    </div>
                                </div>
                            </aside>
                        </div>-->
                </div>
            </div>
        </div>

        <footer id="fh5co-footer" role="contentinfo">

            <div class="container">
                <div class="col-md-3 col-sm-12 col-sm-push-0 col-xs-12 col-xs-push-0">
                    <h3>About Us</h3>
                    <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there
                        live the blind texts. </p>
                </div>
                <div class="col-md-6 col-md-push-1 col-sm-12 col-sm-push-0 col-xs-12 col-xs-push-0">
                    <h3>Our Services</h3>
                    <ul class="float">
                        <li><a href="#">Web Design</a></li>
                        <li><a href="#">Branding &amp; Identity</a></li>
                        <li><a href="#">Free HTML5</a></li>
                        <li><a href="#">HandCrafted Templates</a></li>
                    </ul>
                    <ul class="float">
                        <li><a href="#">Free Bootstrap Template</a></li>
                        <li><a href="#">Free HTML5 Template</a></li>
                        <li><a href="#">Free HTML5 &amp; CSS3 Template</a></li>
                        <li><a href="#">HandCrafted Templates</a></li>
                    </ul>

                </div>

                <div class="col-md-2 col-md-push-1 col-sm-12 col-sm-push-0 col-xs-12 col-xs-push-0">
                    <h3>Follow Us</h3>
                    <ul class="fh5co-social">
                        <li><a href="#"><i class="icon-twitter"></i> Twitter</a></li>
                        <li><a href="#"><i class="icon-facebook"></i> Facebook</a></li>
                        <li><a href="#"><i class="icon-google-plus"></i> Google Plus</a></li>
                        <li><a href="#"><i class="icon-instagram"></i> Instagram</a></li>
                    </ul>
                </div>


                <div class="col-md-12 fh5co-copyright text-center">
                    <p>&copy; 2016 Free HTML5 template. All Rights Reserved. <span>Designed with <i
                            class="icon-heart"></i> by <a href="http://freehtml5.co/" target="_blank">FreeHTML5.co</a> Demo Images by <a
                            href="http://unsplash.com/" target="_blank">Unsplash</a></span></p>
                </div>

            </div>
        </footer>
    </div>

    <!-- jQuery -->
    <script th:src="@{/js/jquery.min.js}"></script>
    <!-- jQuery Easing -->
    <script th:src="@{/js/jquery.easing.1.3.js}"></script>
    <!-- Bootstrap -->
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <!-- Waypoints -->
    <script th:src="@{/js/jquery.waypoints.min.js}"></script>
    <!-- MAIN JS -->
    <script th:src="@{/js/main.js}"></script>

    <script>
        const totalDataCount = document.getElementById("allStockCount").value;
        const dataPerPage = 10;
        const maxPagesToShow = 10; // 한 번에 보여줄 최대 페이지 수
        const totalPages = Math.ceil(totalDataCount / dataPerPage);
        let currentPage = parseInt(document.getElementById("currentPage").value);

        function renderPagination(totalPages, currentPage) {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = ''; // 초기화

            // 시작 페이지와 끝 페이지 계산
            let startPage = Math.floor((currentPage) / maxPagesToShow) * maxPagesToShow + 1;
            let endPage = Math.min(startPage + maxPagesToShow - 1, totalPages);

            // 이전 버튼
            if (currentPage > 0) {
                const prev = document.createElement('a');
                prev.href = "/stocklist/" + (currentPage - 1);
                prev.innerHTML = "&laquo;";
                pagination.appendChild(prev);
            }

            // 페이지 번호 버튼 생성
            for (let i = startPage; i <= endPage; i++) {
                const pageLink = document.createElement('a');
                pageLink.href = "/stocklist/" + (i - 1);
                pageLink.innerHTML = i;
                if ((i - 1) === currentPage) {
                    pageLink.classList.add('active');
                }
                pagination.appendChild(pageLink);
            }

            // 다음 버튼
            if (currentPage <= totalPages - 1) {
                const next = document.createElement('a');
                next.href = "/stocklist/" + (currentPage + 1);
                next.innerHTML = "&raquo;";
                pagination.appendChild(next);
            }
        }

        // 페이지네이션 초기 렌더링
        renderPagination(totalPages, currentPage);

    </script>
</div>
<script>
    function openPopup(element) {
        var stockName = element.getAttribute("data-stock-name");
        var stockPrice = element.getAttribute("data-stock-price");

        // 팝업 창 URL 생성
        var url = '/stock/purchase?stockName=' + encodeURIComponent(stockName) + '&stockPrice=' + encodeURIComponent(stockPrice);

        // 팝업 창 열기
        window.open(url, 'popupWindow', 'width=880,height=880,scrollbars=yes');
    }
</script>
</body>
</html>

</html>