<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Purchase</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">

    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
    <meta name="twitter:title" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:card" content="" />

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="favicon.ico">

    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,700,900' rel='stylesheet' type='text/css'>

    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700" rel="stylesheet">

    <!-- Animate.css -->
<!--    <link rel="stylesheet" th:href="@{/css/animate.css}">-->
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" th:href="@{/css/icomoon.css}">
    <!-- Simple Line Icons -->
    <link rel="stylesheet" th:href="@{/css/simple-line-icons.css}">
    <!-- Bootstrap  -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <!-- Theme style  -->
    <link rel="stylesheet" th:href="@{/css/style.css}">

    <!-- Modernizr JS -->
    <script th:src="@{/js/modernizr-2.6.2.min.js}"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script th:src="@{/js/respond.min.js}"></script>

    <!-- jQuery -->
    <script th:src="@{/js/jquery.min.js}"></script>
    <!-- jQuery Easing -->
    <script th:src="@{/js/jquery.easing.1.3.js}"></script>
    <!-- Bootstrap -->
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <!-- Waypoints -->
    <script th:src="@{/js/jquery.waypoints.min.js}"></script>
    <!-- MAIN JS -->
    <script th:src="@{/js/main.js}"></script>
</head>
<body>
<div class="container mt-5">
    <h1 class="text-center">Stock Purchase</h1>
    <form action="/stock/purchase" method="post" class="mt-4">
        <div class="mb-3">
            <label for="stockName" class="form-label">Stock Name</label>
            <input type="text" id="stockName" name="stockName" class="form-control" placeholder="Enter stock name" readonly
                   th:value="${stock.stockName}">
        </div>
        <div class="mb-3">
            <label for="stockPrice" class="form-label">Stock Price</label>
            <input type="number" id="stockPrice" name="stockPrice" class="form-control" placeholder="Enter stock price" readonly
                   th:value="${stock.stockPrice}">
        </div>
        <div class="mb-3">
            <label for="stockCount" class="form-label">Stock Count</label>
            <input type="number" th:max="${member.userMoney / stock.stockPrice}" min="0" id="stockCount" name="stockCount" class="form-control" placeholder="Enter stock count"
                   required>
        </div>
        <div class="mb-3">
            <label for="totalPrice" class="form-label">Total Price</label>
            <input type="number" id="totalPrice" name="totalPrice" class="form-control" readonly disabled>
        </div>

        <div class="mb-2">
            <label for="UserMoney" class="form-label">소유 잔액 : </label>
            <input th:value="${#numbers.formatInteger(member.userMoney, 0, 'COMMA') + '원'}" id="UserMoney" name="UserMoney" readonly disabled/>
        </div>
        <button type="submit" class="btn btn-primary w-100">구매하기</button>
    </form>
</div>
<script>
    // Automatically calculate total price
    document.getElementById('stockCount').addEventListener('input', function () {
        const stockPrice = document.getElementById('stockPrice').value || 0;
        const stockCount = this.value || 0;
        document.getElementById('totalPrice').value = stockPrice * stockCount;
    });
</script>
</body>
</html>
